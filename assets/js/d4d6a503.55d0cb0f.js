"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2276],{4318:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(4700);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},4918:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"System Design & Architecture/Backend","title":"ViBe Backend","description":"Overview","source":"@site/docs/System Design & Architecture/Backend.md","sourceDirName":"System Design & Architecture","slug":"/System Design & Architecture/Backend","permalink":"/vibe/docs/System Design & Architecture/Backend","draft":false,"unlisted":false,"editUrl":"https://github.com/continuousactivelearning/vibe/edit/main/docs/docs/System Design & Architecture/Backend.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Module Breakdown","permalink":"/vibe/docs/System Design & Architecture/Backend/Module Breakdown"},"next":{"title":"Using the CLI","permalink":"/vibe/docs/cli/intro"}}');var r=s(7968),t=s(4318);const o={},l="ViBe Backend",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Main Features",id:"main-features",level:2},{value:"Directory Structure",id:"directory-structure",level:2},{value:"Key Modules",id:"key-modules",level:2},{value:"Module Details",id:"module-details",level:2},{value:"Shared Layer",id:"shared-layer",level:2},{value:"Utilities",id:"utilities",level:2},{value:"Scripts",id:"scripts",level:2},{value:"Plop Templates",id:"plop-templates",level:2},{value:"Build Output",id:"build-output",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Error Handling &amp; Logging",id:"error-handling--logging",level:2},{value:"Testing",id:"testing",level:2},{value:"Deployment",id:"deployment",level:2},{value:"Extending",id:"extending",level:2},{value:"Technologies Used",id:"technologies-used",level:2},{value:"Contributing",id:"contributing",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"vibe-backend",children:"ViBe Backend"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["ViBe is a modular, scalable backend built with ",(0,r.jsx)(n.strong,{children:"TypeScript"}),", ",(0,r.jsx)(n.strong,{children:"Express"}),", ",(0,r.jsx)(n.strong,{children:"MongoDB"}),", and ",(0,r.jsx)(n.strong,{children:"InversifyJS"})," for dependency injection. It powers the ViBe platform, supporting authentication, course management, quizzes, anomaly detection, notifications, user progress, and more."]}),"\n",(0,r.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Express"}),": Main web server, with modular routing via ",(0,r.jsx)(n.code,{children:"routing-controllers"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"InversifyJS"}),": Dependency injection for services, repositories, and controllers."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MongoDB"}),": Primary database, accessed via repository pattern."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sentry"}),": Error monitoring and profiling."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Firebase"}),": Authentication and user management."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OpenAPI"}),": Auto-generated API documentation via Scalar."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"main-features",children:"Main Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authentication"}),": Firebase-based, with JWT support and user management."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Courses"}),": CRUD for courses, versions, modules, sections, and items (video, quiz, blog)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quizzes"}),": Question banks, quiz attempts, grading, and settings."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Users"}),": Enrollment, progress tracking, watch time, and anomaly detection."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Notifications"}),": Invites, email notifications, and status tracking."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Settings"}),": Proctoring and custom settings for users/courses."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Anomalies"}),": Detection and monitoring for user/course anomalies."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GenAI"}),": Integration for generative AI features."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Reference"}),": ",(0,r.jsx)(n.code,{children:"/reference"})," endpoint for live OpenAPI docs."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"backend/\n\u251c\u2500\u2500 plop-templates/         # Code generation templates\n\u2502   \u251c\u2500\u2500 controller.hbs\n\u2502   \u251c\u2500\u2500 repository.hbs\n\u2502   \u251c\u2500\u2500 service.hbs\n\u2502   \u2514\u2500\u2500 module-base/\n\u2502       \u251c\u2500\u2500 container.ts.hbs\n\u2502       \u251c\u2500\u2500 index.ts.hbs\n\u2502       \u2514\u2500\u2500 types.ts.hbs\n\u251c\u2500\u2500 src/                    # Main source code\n\u2502   \u251c\u2500\u2500 bootstrap/          # Module loader and startup logic\n\u2502   \u2502   \u2514\u2500\u2500 loadModules.ts\n\u2502   \u251c\u2500\u2500 config/             # App and DB configuration\n\u2502   \u2502   \u251c\u2500\u2500 ai.ts\n\u2502   \u2502   \u251c\u2500\u2500 app.ts\n\u2502   \u2502   \u251c\u2500\u2500 db.ts\n\u2502   \u2502   \u251c\u2500\u2500 index.ts\n\u2502   \u2502   \u251c\u2500\u2500 sentry.ts\n\u2502   \u2502   \u251c\u2500\u2500 smtp.ts\n\u2502   \u2502   \u2514\u2500\u2500 storage.ts\n\u2502   \u251c\u2500\u2500 container.ts        # Inversify DI container setup\n\u2502   \u251c\u2500\u2500 index.ts            # Main entry point\n\u2502   \u251c\u2500\u2500 instrument.ts       # Sentry instrumentation\n\u2502   \u251c\u2500\u2500 inversify-adapter.ts# Inversify adapter for routing-controllers\n\u2502   \u251c\u2500\u2500 modules/            # Main business logic, organized by domain\n\u2502   \u2502   \u251c\u2500\u2500 anomalies/\n\u2502   \u2502   \u251c\u2500\u2500 auth/\n\u2502   \u2502   \u251c\u2500\u2500 courses/\n\u2502   \u2502   \u251c\u2500\u2500 genAI/\n\u2502   \u2502   \u251c\u2500\u2500 notifications/\n\u2502   \u2502   \u251c\u2500\u2500 quizzes/\n\u2502   \u2502   \u251c\u2500\u2500 settings/\n\u2502   \u2502   \u2514\u2500\u2500 users/\n\u2502   \u251c\u2500\u2500 shared/             # Common code (classes, interfaces, db, middleware, etc.)\n\u2502   \u2502   \u251c\u2500\u2500 classes/\n\u2502   \u2502   \u251c\u2500\u2500 constants/\n\u2502   \u2502   \u251c\u2500\u2500 database/\n\u2502   \u2502   \u251c\u2500\u2500 functions/\n\u2502   \u2502   \u251c\u2500\u2500 interfaces/\n\u2502   \u2502   \u2514\u2500\u2500 middleware/\n\u2502   \u251c\u2500\u2500 types.ts            # Global type symbols for DI\n\u2502   \u2514\u2500\u2500 utils/              # Utility functions\n\u2502       \u251c\u2500\u2500 env.ts\n\u2502       \u251c\u2500\u2500 index.ts\n\u2502       \u251c\u2500\u2500 logDetails.ts\n\u2502       \u2514\u2500\u2500 to-bool.ts\n\u251c\u2500\u2500 .env                    # Environment variables (not committed)\n\u251c\u2500\u2500 .example.env            # Example env file\n\u251c\u2500\u2500 Dockerfile              # Docker setup for deployment\n\u251c\u2500\u2500 Dockerfile-all          # Docker setup for all-in-one deployment\n\u251c\u2500\u2500 firebase.json           # Firebase config\n\u251c\u2500\u2500 package.json            # Project metadata and dependencies\n\u251c\u2500\u2500 plopfile.cjs            # Plop code generator config\n\u251c\u2500\u2500 tsconfig.json           # TypeScript config\n\u251c\u2500\u2500 typedoc.json            # Typedoc config for API docs\n\u251c\u2500\u2500 vite.config.ts          # Vite config (if used for frontend)\n\u2514\u2500\u2500 README.md               # Project documentation\n"})}),"\n",(0,r.jsx)(n.h2,{id:"key-modules",children:"Key Modules"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auth"}),": FirebaseAuthService for signup, login, password change, and token verification."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Courses"}),": CourseRepository for managing courses, versions, modules, sections, and items."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quizzes"}),": Quiz logic, question types (SOL, SML, MTL, OTL, NAT, DES), and grading."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Users"}),": EnrollmentService and ProgressService for tracking user progress and enrollments."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Notifications"}),": InviteRepository and MailService for sending and managing invites."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Settings"}),": SettingsRepository for proctoring and custom settings."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Anomalies"}),": User anomaly tracking and reporting."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"module-details",children:"Module Details"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Anomalies"}),": Detects and tracks user/course anomalies for monitoring and security."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auth"}),": Handles user authentication, signup, login, password management, and token verification using Firebase."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Courses"}),": Manages courses, versions, modules, sections, and items (video, quiz, blog)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GenAI"}),": Integrates generative AI features (details depend on implementation)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Notifications"}),": Manages invites, email notifications, and status tracking."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quizzes"}),": Handles question banks, quiz attempts, grading, and quiz settings. Supports multiple question types (SOL, SML, MTL, OTL, NAT, DES)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Settings"}),": Manages proctoring and custom settings for users and courses."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Users"}),": Tracks enrollments, progress, watch time, and user-specific data."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"shared-layer",children:"Shared Layer"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Classes"}),": Base service classes, utility classes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Constants"}),": Shared constants for configuration and logic."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Database"}),": MongoDB connection, repositories, and interfaces for CRUD operations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Functions"}),": Utility functions (OpenAPI spec generation, authorization, current user checker, etc.)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Interfaces"}),": TypeScript interfaces for models, DTOs, and contracts."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Middleware"}),": Express middleware for logging, error handling, etc."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"utilities",children:"Utilities"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"env.ts"}),": Loads environment variables."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"logDetails.ts"}),": Prints startup summary and route table."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"to-bool.ts"}),": Utility for boolean conversion."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"scripts",children:"Scripts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"generate-openapi.cjs"}),": Generates OpenAPI spec from codebase."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"class-transformer-0.5.1.patch.js"}),": Patch for class-transformer compatibility."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"start.sh"}),": Startup script for server."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"plop-templates",children:"Plop Templates"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Used for scaffolding new modules, controllers, services, and repositories."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"build-output",children:"Build Output"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["All compiled JS files are placed in the ",(0,r.jsx)(n.code,{children:"build/"})," directory. Do not edit these directly."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["See ",(0,r.jsx)(n.code,{children:".example.env"})," for all required variables."]}),"\n",(0,r.jsxs)(n.li,{children:["Sensitive values (DB, Firebase, Sentry, etc.) should be set in ",(0,r.jsx)(n.code,{children:".env"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Auto-generated OpenAPI docs available at ",(0,r.jsx)(n.code,{children:"/reference"})," after starting the server."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling--logging",children:"Error Handling & Logging"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sentry"}),": Integrated for error tracking in production/staging."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom Middleware"}),": Logging of requests, responses, and errors."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Startup Summary"}),": Prints environment, routes, and config on boot."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Uses ",(0,r.jsx)(n.code,{children:"vitest"})," for unit and integration tests."]}),"\n",(0,r.jsxs)(n.li,{children:["Run tests with ",(0,r.jsx)(n.code,{children:"pnpm test"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Dockerfiles provided for containerized deployment."}),"\n",(0,r.jsx)(n.li,{children:"Sentry integration for error monitoring in production/staging."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"extending",children:"Extending"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add new modules in ",(0,r.jsx)(n.code,{children:"src/modules/"})]}),"\n",(0,r.jsxs)(n.li,{children:["Register controllers, services, and repositories in the module's ",(0,r.jsx)(n.code,{children:"index.ts"})]}),"\n",(0,r.jsx)(n.li,{children:"Use dependency injection via Inversify"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"technologies-used",children:"Technologies Used"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TypeScript, Express, MongoDB, InversifyJS, Firebase Admin, Sentry, Scalar, Chalk, Console Table Printer, Routing Controllers, Class Validator/Transformer"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"contributing",children:"Contributing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"See code comments and module structure for guidance. Use plop templates for scaffolding new controllers, services, and repositories."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"For more details, see the codebase and module documentation."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);