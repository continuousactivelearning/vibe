## Challenge 

1.  **Register a new  `APISource`  with the container.**
    
2.  **Swap the implementation**  from  `RSSFeedSource`  to  `APISource`  without changing the  `NewsAggregator`  code.
    
3.  **Write a test**  that injects a mock source to verify the aggregator’s behavior.
    

## Solution & Deep Dive Explanation

  ## **Step 1: Register  `APISource`**

  ```typescript
// src/index.ts
import { Container } from "typedi";
import { NewsAggregator } from "./NewsAggregator";
import { APISource } from "./APISource";
import { NewsSource } from "./NewsSource";

// Override the default NewsSource implementation
Container.set(NewsSource, new APISource());

// Resolve the aggregator with APISource injected
const aggregator = Container.get(NewsAggregator);
aggregator.getLatestArticles(); // Now uses APISource
  ```

**Explanation:**

-   `Container.set(NewsSource, new APISource())`  tells TypeDI to use  `APISource`  whenever  `NewsSource`  is requested.
    
-   No changes to  `NewsAggregator`  are needed-the container handles the swap automatically.
   

## **Step 2: Write a Test with a Mock Source**

  ```typescript
// tests/NewsAggregator.test.ts
import "reflect-metadata";
import { Container } from "typedi";
import { NewsAggregator } from "../src/NewsAggregator";
import { NewsSource } from "../src/NewsSource";

// Mock implementation for testing
class MockSource implements NewsSource {
  async fetchArticles(): Promise<string[]> {
    return ["Mock Article 1", "Mock Article 2"];
  }
}

describe("NewsAggregator", () => {
  beforeEach(() => {
    // Inject the mock before each test
    Container.set(NewsSource, new MockSource());
  });

  afterEach(() => {
    // Reset the container to avoid side effects
    Container.reset();
  });

  it("should fetch articles from the mock source", async () => {
    const aggregator = Container.get(NewsAggregator);
    const articles = await aggregator.getLatestArticles();
    expect(articles).toEqual(["Mock Article 1", "Mock Article 2"]);
  });
});

  ```
**Explanation:**

-   **MockSource:**  Simulates a data source for testing.
    
-   **Container.set():**  Injects the mock before each test.
    
-   **Container.reset():**  Clears overrides after each test to avoid leaks.
    
-   The test verifies that the aggregator uses the mock source without touching real data.
   

## **Step 3: Run the Test**

With Jest (or your preferred test runner):

  ```bash
npm test
  ```

**Expected Output:**
  ```typescript
PASS  tests/NewsAggregator.test.ts
  NewsAggregator
    ✓ should fetch articles from the mock source (5ms)
  ```
